<div class="card-label">DAILY EFFECTIVENESS <span class="tooltip-wrap info-icon">&#9432;<span class="tooltip-text">Composite 0–10 score of today's trading quality. Four dimensions: edge capture, execution timing, risk discipline, and system reliability.</span></span></div>
{% if scorecard %}
  {% set total = scorecard.total | default(0) %}
  {% set score_class = "score-good" if total >= 7 else ("score-ok" if total >= 4 else "score-bad") %}
  {% set bar_class = "good" if total >= 7 else ("ok" if total >= 4 else "bad") %}

  <div style="display:inline-flex; align-items:baseline; gap:4px; margin:4px 0;">
    <span style="font-size:1.5rem; font-weight:700; font-family:'JetBrains Mono',monospace;"
          class="{{ score_class }}">{{ "%.1f" | format(total) }}</span>
    <span style="font-size:10px; color:var(--text-muted);">/ 10</span>
  </div>

  <div class="progress-bar" style="height:3px; margin:4px 0;">
    <div class="progress-fill {{ bar_class }}" style="width:{{ total * 10 }}%"></div>
  </div>

  <div class="scorecard-subscores" style="margin-top:6px;">
    {% set edge = scorecard.edge_quality | default(0) %}
    {% set exec = scorecard.execution_quality | default(0) %}
    {% set risk = scorecard.risk_discipline | default(0) %}
    {% set ops = scorecard.operational_integrity | default(0) %}

    <div class="subscore" title="Edge Quality: Win rate × profit factor">
      <div class="subscore-value {{ 'score-good' if edge >= 7 else ('score-ok' if edge >= 4 else 'score-bad') }}">
        {{ "%.1f" | format(edge) }}
      </div>
      <div class="subscore-label">EDGE</div>
    </div>

    <div class="subscore" title="Execution Quality: Exit timing efficiency">
      <div class="subscore-value {{ 'score-good' if exec >= 7 else ('score-ok' if exec >= 4 else 'score-bad') }}">
        {{ "%.1f" | format(exec) }}
      </div>
      <div class="subscore-label">EXEC</div>
    </div>

    <div class="subscore" title="Risk Discipline: Drawdown + loss streak penalty">
      <div class="subscore-value {{ 'score-good' if risk >= 7 else ('score-ok' if risk >= 4 else 'score-bad') }}">
        {{ "%.1f" | format(risk) }}
      </div>
      <div class="subscore-label">RISK</div>
    </div>

    <div class="subscore" title="System Health: DLQ, agent health, ops reliability">
      <div class="subscore-value {{ 'score-good' if ops >= 7 else ('score-ok' if ops >= 4 else 'score-bad') }}">
        {{ "%.1f" | format(ops) }}
      </div>
      <div class="subscore-label">SYS</div>
    </div>
  </div>
{% else %}
  <div class="empty-state" style="padding:8px 0;">
    <div class="empty-message">NO DATA</div>
    <div class="empty-detail">Scores computed from completed trades</div>
  </div>
{% endif %}
