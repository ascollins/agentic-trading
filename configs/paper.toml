# ===================================================================
# Paper trading configuration — Bybit Demo Account
# ===================================================================
# All 12 strategies enabled for full autonomous signal generation.
# Uses default BaseStrategy cooldown (15 min) unless overridden.
# ===================================================================

mode = "paper"

[[exchanges]]
name = "bybit"
api_key_env = "TRADING_BYBIT_API_KEY"
secret_env = "TRADING_BYBIT_SECRET"
testnet = false
demo = true
rate_limit = 1200

[symbols]
# Top 12 USDT perpetuals by volume on Bybit
symbols = [
    "BTC/USDT",
    "ETH/USDT",
    "SOL/USDT",
    "XRP/USDT",
    "BNB/USDT",
    "DOGE/USDT",
    "TRX/USDT",
    "SUI/USDT",
    "ADA/USDT",
    "AAVE/USDT",
    "ZEC/USDT",
    "PEPE/USDT",
]

# ===================================================================
# TREND & MOMENTUM STRATEGIES
# ===================================================================

[[strategies]]
strategy_id = "trend_following"
enabled = true

[strategies.params]
fast_ema = 12
slow_ema = 26
signal_ema = 9
adx_threshold = 25
atr_multiplier = 1.5
volume_filter = true
min_confidence = 0.3
signal_cooldown_minutes = 30

[[strategies]]
strategy_id = "multi_tf_ma"
enabled = true

[strategies.params]
fast_ema = 50
slow_ema = 200
pullback_ema = 21
adx_entry_threshold = 20
adx_exit_threshold = 15
rsi_pullback_low = 40
rsi_pullback_high = 50
rsi_rally_low = 50
rsi_rally_high = 60
atr_multiplier = 2.0
min_confidence = 0.3
signal_cooldown_minutes = 30

[[strategies]]
strategy_id = "breakout"
enabled = true

[strategies.params]
donchian_period = 20
volume_confirmation_multiplier = 1.5
atr_period = 14
breakout_atr_threshold = 1.0
min_liquidity_score = 0.5
min_confidence = 0.3
signal_cooldown_minutes = 30

# ===================================================================
# MEAN REVERSION STRATEGIES
# ===================================================================

[[strategies]]
strategy_id = "mean_reversion"
enabled = true

[strategies.params]
bb_period = 20
bb_std = 2.0
rsi_oversold = 30
rsi_overbought = 70
mean_reversion_score_threshold = 0.5
require_range_regime = false
min_confidence = 0.3
signal_cooldown_minutes = 30

[[strategies]]
strategy_id = "mean_reversion_enhanced"
enabled = true

[strategies.params]
bb_period = 20
bb_std = 2.0
rsi_oversold = 30
rsi_overbought = 70
time_stop_bars = 10
atr_multiplier = 2.5
weekly_trend_filter = true
min_confidence = 0.3
signal_cooldown_minutes = 30

# ===================================================================
# OSCILLATOR & DIVERGENCE STRATEGIES
# ===================================================================

[[strategies]]
strategy_id = "rsi_divergence"
enabled = true

[strategies.params]
rsi_period = 14
rsi_oversold = 35
rsi_overbought = 65
lookback_bars = 30
min_divergence_bars = 5
rsi_exit_level = 50
atr_multiplier = 2.0
trend_filter = true
min_confidence = 0.3
signal_cooldown_minutes = 30

[[strategies]]
strategy_id = "stochastic_macd"
enabled = true

[strategies.params]
stoch_oversold = 20
stoch_overbought = 80
volume_gate = 1.2
confluence_window = 3
atr_multiplier = 1.5
min_confidence = 0.3
signal_cooldown_minutes = 30

[[strategies]]
strategy_id = "obv_divergence"
enabled = true

[strategies.params]
lookback_bars = 30
min_divergence_bars = 5
volume_confirmation = 1.0
atr_multiplier = 2.0
obv_ema_exit = true
min_confidence = 0.3
signal_cooldown_minutes = 30

# ===================================================================
# VOLATILITY STRATEGIES
# ===================================================================

[[strategies]]
strategy_id = "bb_squeeze"
enabled = true

[strategies.params]
squeeze_percentile = 0.10
adx_threshold = 20
rsi_neutral = 50
atr_multiplier = 2.0
keltner_trailing = true
min_confidence = 0.3
signal_cooldown_minutes = 30

# ===================================================================
# SMART MONEY CONCEPTS (SMC) STRATEGIES
# ===================================================================

[[strategies]]
strategy_id = "supply_demand"
enabled = true

[strategies.params]
min_demand_distance = 0.0
max_demand_distance = 0.02
min_supply_distance = 0.0
max_supply_distance = 0.02
require_bos = true
volume_gate = 1.0
atr_multiplier = 1.5
target_rr_ratio = 2.0
min_confidence = 0.3
signal_cooldown_minutes = 30

[[strategies]]
strategy_id = "fibonacci_confluence"
enabled = true

[strategies.params]
swing_lookback = 50
min_swing_pct = 0.03
confluence_band_pct = 0.005
min_confluence_levels = 3
rsi_long_max = 40
rsi_short_min = 60
atr_multiplier = 2.0
atr_target_multiplier = 3.0
min_confidence = 0.3
signal_cooldown_minutes = 30

# ===================================================================
# FUNDING RATE STRATEGY
# ===================================================================

[[strategies]]
strategy_id = "funding_arb"
enabled = true

[strategies.params]
funding_threshold = 0.0001
high_funding_threshold = 0.0005
position_size_pct = 0.05
atr_stop_multiplier = 3.0
min_confidence = 0.3
signal_cooldown_minutes = 30

# ===================================================================
# EXIT MANAGEMENT (server-side TP/SL)
# ===================================================================

[exits]
enabled = true
sl_atr_multiplier = 2.5           # SL = entry ± ATR × 2.5
tp_atr_multiplier = 5.0           # TP = entry ± ATR × 5.0 (2:1 R:R)
trailing_stop_atr_multiplier = 2.0 # Trailing distance = ATR × 2.0
trailing_strategies = [
    "trend_following", "breakout", "multi_tf_ma", "bb_squeeze",
]

# ===================================================================
# RISK MANAGEMENT
# ===================================================================

[risk]
max_portfolio_leverage = 3.0
max_single_position_pct = 0.10
max_daily_loss_pct = 0.05
max_drawdown_pct = 0.15
reconciliation_interval_seconds = 30

# ===================================================================
# OBSERVABILITY
# ===================================================================

[observability]
log_level = "INFO"
log_format = "json"
decision_audit = true

# ===================================================================
# OPTIMIZER (disabled until historical data available)
# ===================================================================

[optimizer_scheduler]
enabled = false
interval_hours = 12.0
strategies = [
    "trend_following", "mean_reversion", "breakout",
    "multi_tf_ma", "rsi_divergence", "stochastic_macd",
    "obv_divergence", "bb_squeeze", "supply_demand",
    "fibonacci_confluence", "mean_reversion_enhanced",
]
data_window_days = 90
n_samples = 30
top_n_for_wf = 3
wf_folds = 3
auto_apply = false
max_results_kept = 20
results_dir = "data/optimizer_results"
initial_delay_minutes = 5.0
