{
  "annotations": { "list": [] },
  "description": "Detailed strategy performance analysis. Compare win rates, profitability, and signal activity across all strategies.",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "links": [
    { "title": "‚Üê Back to Overview", "url": "/d/trading-overview", "type": "link", "icon": "arrow-left", "tooltip": "Return to the main overview dashboard" },
    { "title": "Risk & Governance", "url": "/d/risk-governance", "type": "link", "icon": "shield" },
    { "title": "System Health", "url": "/d/system-health", "type": "link", "icon": "heart" }
  ],
  "panels": [
    {
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 0 },
      "options": { "content": "# Strategy Performance", "mode": "markdown" }
    },
    {
      "title": "Win Rate by Strategy",
      "description": "What percentage of each strategy's trades are profitable. Above 50% is good. This is a rolling calculation that updates as new trades close.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 2 },
      "targets": [
        {
          "expr": "trading_journal_win_rate",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "min": 0,
          "max": 1,
          "custom": {
            "drawStyle": "line",
            "lineWidth": 2,
            "fillOpacity": 10,
            "showPoints": "never",
            "thresholdsStyle": { "mode": "line" }
          },
          "thresholds": {
            "steps": [
              { "value": null, "color": "red" },
              { "value": 0.40, "color": "yellow" },
              { "value": 0.50, "color": "green" }
            ]
          }
        }
      }
    },
    {
      "title": "Gains vs. Losses Ratio",
      "description": "Total winning dollars divided by total losing dollars. Above 1.0 means gains outweigh losses overall. Higher is better. Below 1.0 = losing money.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 2 },
      "targets": [
        {
          "expr": "trading_journal_profit_factor",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineWidth": 2,
            "fillOpacity": 10,
            "showPoints": "never",
            "thresholdsStyle": { "mode": "line" }
          },
          "thresholds": {
            "steps": [
              { "value": null, "color": "red" },
              { "value": 1.0, "color": "yellow" },
              { "value": 1.5, "color": "green" }
            ]
          }
        }
      }
    },
    {
      "title": "Average Profit per Trade",
      "description": "The average dollar amount each strategy makes (or loses) per trade. Positive = profitable strategy. Negative = losing strategy.",
      "type": "stat",
      "gridPos": { "h": 5, "w": 6, "x": 0, "y": 10 },
      "targets": [
        {
          "expr": "trading_journal_expectancy",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "currencyUSD",
          "thresholds": {
            "steps": [
              { "value": null, "color": "red" },
              { "value": 0, "color": "green" }
            ]
          }
        }
      },
      "options": { "graphMode": "none", "textMode": "auto", "colorMode": "value", "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "title": "Average Reward per Risk",
      "description": "For each dollar risked on a trade, how many dollars did we earn on average? Above 0.5 (green) is good. Negative (red) means we're losing more than our initial risk.",
      "type": "stat",
      "gridPos": { "h": 5, "w": 6, "x": 6, "y": 10 },
      "targets": [
        {
          "expr": "trading_journal_avg_r_multiple",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "thresholds": {
            "steps": [
              { "value": null, "color": "red" },
              { "value": 0, "color": "yellow" },
              { "value": 0.5, "color": "green" }
            ]
          }
        }
      },
      "options": { "graphMode": "none", "textMode": "auto", "colorMode": "value", "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "title": "Return Consistency",
      "description": "How steady are the profits? Higher = more reliable and predictable returns. Above 1.0 (green) is excellent. Below 0 (red) means inconsistent or negative returns.",
      "type": "stat",
      "gridPos": { "h": 5, "w": 6, "x": 12, "y": 10 },
      "targets": [
        {
          "expr": "trading_journal_sharpe",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "thresholds": {
            "steps": [
              { "value": null, "color": "red" },
              { "value": 0, "color": "yellow" },
              { "value": 1.0, "color": "green" }
            ]
          }
        }
      },
      "options": { "graphMode": "none", "textMode": "auto", "colorMode": "value", "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "title": "Profit Capture Rate",
      "description": "What percentage of each trade's maximum potential profit did we actually capture? 70%+ (green) = excellent trade management. Below 40% (red) = exiting too early or too late.",
      "type": "gauge",
      "gridPos": { "h": 5, "w": 6, "x": 18, "y": 10 },
      "targets": [
        {
          "expr": "trading_journal_management_efficiency",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "min": 0,
          "max": 1,
          "thresholds": {
            "steps": [
              { "value": null, "color": "red" },
              { "value": 0.4, "color": "yellow" },
              { "value": 0.7, "color": "green" }
            ]
          }
        }
      }
    },
    {
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 15 },
      "options": { "content": "# Signal & Trade Activity", "mode": "markdown" }
    },
    {
      "title": "Signals by Strategy & Direction",
      "description": "How many trading signals each strategy generated, broken down by direction. Green = buy signals. Red = sell signals. Purple = neutral/flat signals.",
      "type": "barchart",
      "gridPos": { "h": 10, "w": 12, "x": 0, "y": 17 },
      "targets": [
        {
          "expr": "sum by (strategy_id, direction) (increase(trading_signals_total[1h]))",
          "legendFormat": "{{strategy_id}} ({{direction}})",
          "refId": "A",
          "instant": true
        }
      ],
      "options": {
        "orientation": "horizontal",
        "showValue": "always",
        "stacking": "normal",
        "groupWidth": 0.7,
        "barWidth": 0.8
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" }
        },
        "overrides": [
          { "matcher": { "id": "byRegexp", "options": "long" }, "properties": [{ "id": "color", "value": { "fixedColor": "#73BF69", "mode": "fixed" } }] },
          { "matcher": { "id": "byRegexp", "options": "short" }, "properties": [{ "id": "color", "value": { "fixedColor": "#F2495C", "mode": "fixed" } }] },
          { "matcher": { "id": "byRegexp", "options": "flat" }, "properties": [{ "id": "color", "value": { "fixedColor": "#B877D9", "mode": "fixed" } }] }
        ]
      }
    },
    {
      "title": "Market Activity by Symbol",
      "description": "Which markets are getting the most trading attention over the last hour.",
      "type": "barchart",
      "gridPos": { "h": 10, "w": 12, "x": 12, "y": 17 },
      "targets": [
        {
          "expr": "sum by (symbol) (increase(trading_signals_total[1h]))",
          "legendFormat": "{{symbol}}",
          "refId": "A",
          "instant": true
        }
      ],
      "options": {
        "orientation": "horizontal",
        "showValue": "always",
        "groupWidth": 0.7,
        "barWidth": 0.8
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" }
        }
      }
    },
    {
      "title": "",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 27 },
      "options": { "content": "# Prediction Quality", "mode": "markdown" }
    },
    {
      "title": "Prediction Accuracy",
      "description": "When a strategy says it's 80% confident, is it actually right 80% of the time? Lower values = more accurate predictions. Below 0.15 (green) is well-calibrated.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 29 },
      "targets": [
        {
          "expr": "trading_journal_confidence_brier",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineWidth": 2,
            "fillOpacity": 10,
            "thresholdsStyle": { "mode": "line" }
          },
          "thresholds": {
            "steps": [
              { "value": null, "color": "green" },
              { "value": 0.15, "color": "yellow" },
              { "value": 0.25, "color": "red" }
            ]
          }
        }
      }
    },
    {
      "title": "Is This Skill or Luck?",
      "description": "Statistical test of whether each strategy's profits are due to genuine skill or random chance. Below 0.05 (green) = very likely real skill. Above 0.25 (red) = could be luck.",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 29 },
      "targets": [
        {
          "expr": "trading_journal_edge_pvalue",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineWidth": 2,
            "fillOpacity": 10,
            "thresholdsStyle": { "mode": "line" }
          },
          "thresholds": {
            "steps": [
              { "value": null, "color": "green" },
              { "value": 0.05, "color": "yellow" },
              { "value": 0.25, "color": "red" }
            ]
          }
        }
      }
    },
    {
      "title": "Overtrading Alert",
      "description": "Is any strategy placing trades more frequently than expected? NORMAL = trading at expected pace. OVERTRADING = too many signals, may need throttling.",
      "type": "stat",
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 29 },
      "targets": [
        {
          "expr": "trading_journal_overtrading",
          "legendFormat": "{{strategy_id}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "mappings": [
            { "type": "value", "options": { "0": { "text": "NORMAL", "color": "green" }, "1": { "text": "OVERTRADING", "color": "red" } } }
          ]
        }
      },
      "options": { "graphMode": "none", "textMode": "auto", "colorMode": "background", "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "title": "Active Trades / Completed Trades",
      "description": "How many trades are currently open vs. how many have been closed since the system started.",
      "type": "stat",
      "gridPos": { "h": 4, "w": 12, "x": 0, "y": 37 },
      "targets": [
        {
          "expr": "trading_journal_open_trades",
          "legendFormat": "Active",
          "refId": "A"
        },
        {
          "expr": "trading_journal_closed_trades",
          "legendFormat": "Completed",
          "refId": "B"
        }
      ],
      "options": { "graphMode": "none", "textMode": "auto", "colorMode": "value", "reduceOptions": { "calcs": ["lastNotNull"] } }
    },
    {
      "title": "Trade Count by Strategy & Outcome",
      "description": "Total trades per strategy, broken down by whether they were winners or losers.",
      "type": "barchart",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 37 },
      "targets": [
        {
          "expr": "trading_journal_trades_total",
          "legendFormat": "{{strategy_id}} ({{outcome}})",
          "refId": "A",
          "instant": true
        }
      ],
      "options": {
        "orientation": "horizontal",
        "showValue": "always",
        "stacking": "normal",
        "groupWidth": 0.7,
        "barWidth": 0.8
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" }
        },
        "overrides": [
          { "matcher": { "id": "byRegexp", "options": "win" }, "properties": [{ "id": "color", "value": { "fixedColor": "#73BF69", "mode": "fixed" } }] },
          { "matcher": { "id": "byRegexp", "options": "loss" }, "properties": [{ "id": "color", "value": { "fixedColor": "#F2495C", "mode": "fixed" } }] }
        ]
      }
    }
  ],
  "schemaVersion": 39,
  "tags": ["trading", "strategy"],
  "templating": { "list": [] },
  "time": { "from": "now-1h", "to": "now" },
  "refresh": "10s",
  "title": "Strategy Performance",
  "uid": "strategy-performance"
}
